<!DOCTYPE html>
<html>
    <head>
        <title>Blair Purity Test</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="index.css" />
    </head>
    <body>
        <h1>The Blair Purity Test</h1>
        <p>
            <i
                >RI stands for Romantic Interest. Your score is the number of
                boxes left blank.</i
            >
        </p>

        <p>
            <b><i>Have you ever (in high school):</i></b>
        </p>

        <form id="test">
            <div id="questions"></div>

            <input type="submit" value="Get your score" />
        </form>
    </body>
    <script>
        const formElement = document.getElementById("test");
        const questionsElement = document.getElementById("questions");

        fetch(
            "https://raw.githubusercontent.com/blair-purity-test/blair-purity-test.github.io/refs/heads/main/questions.txt"
        ).then((response) => {
            if (response.ok) {
                response.text().then((data) => {
                    const questions = data.split("\n");
                    for (let i = 0; i < questions.length; i++) {
                        const input = document.createElement("input");
                        input.setAttribute("id", `question${i + 1}`);
                        input.setAttribute("name", `question${i + 1}`);
                        input.setAttribute("type", "checkbox");

                        const label = document.createElement("label");
                        label.setAttribute("for", `question${i + 1}`);
                        label.textContent = questions[i];

                        const div = document.createElement("div");
                        div.setAttribute("class", "question");
                        div.appendChild(input);
                        div.appendChild(label);
                        questionsElement.appendChild(div);
                    }
                });
            } else {
                console.error("err");
            }
        });

        formElement.addEventListener("submit", (e) => {
            e.preventDefault();
            const object = {};
            let score = 100;
            const data = new FormData(e.target);
            data.forEach(([value, key]) => {
                object[key] = value;
                score--;
            });

            alert(`Your score: ${score}`);
        });
    </script>
</html>
